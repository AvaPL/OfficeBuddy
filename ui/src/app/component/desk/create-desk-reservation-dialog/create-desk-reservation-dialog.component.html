<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <h2 mat-dialog-title class="title">New reservation</h2>
  <mat-dialog-content>
    <mat-selection-list formControlName="deskId" [multiple]="false">
      @for (desk of desks; track desk) {
        <mat-list-option color="primary" [value]="desk.id" [selected]="[desk.id] === form.get('deskId')?.value">
          <div class="desk-horizontal">
            <span>{{ desk.name }}</span>
            <div class="monitors-count" matTooltip="Monitors">
              <mat-icon>monitor</mat-icon>
              <span>{{ desk.monitorsCount }}</span>
            </div>
            <mat-icon *ngIf="desk.isStanding" class="standing-icon" matTooltip="Standing">boy</mat-icon>
            <mat-icon *ngIf="desk.hasPhone" matTooltip="Phone">phone</mat-icon>
          </div>
        </mat-list-option>
        <mat-divider *ngIf="!$last"></mat-divider>
      }
    </mat-selection-list>
    <mat-form-field class="reservation-date-range">
      <mat-label>Reservation date range</mat-label>
      <mat-date-range-input [rangePicker]="picker">
        <input matStartDate formControlName="startDate" placeholder="Start date" required (click)="picker.open()">
        <input matEndDate formControlName="endDate" placeholder="End date" required (click)="picker.open()">
      </mat-date-range-input>
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-date-range-picker [touchUi]="touchUiQuery.matches" #picker></mat-date-range-picker>
      <mat-error *ngIf="form.get('startDate')?.hasError('required') || form.get('endDate')?.hasError('required')">
        Reservation date range is required
      </mat-error>
    </mat-form-field>
    <mat-form-field subscriptSizing="dynamic">
      <mat-label>Comment (optional)</mat-label>
      <textarea formControlName="comment" class="comment" matInput></textarea>
    </mat-form-field>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button type="button" (click)="onCancel()">Back</button>
    <button mat-button color="primary" type="submit" [disabled]="!form.valid">Confirm</button>
  </mat-dialog-actions>
</form>
